import{j as e,r as c,u as f,d as p}from"./index-Dy62sxPE.js";import{c as h,L as b,a as g,B as x,g as j,Q as v,T as q}from"./index-Ct8RpIGo.js";function Q({className:t,...r}){return e.jsx("textarea",{"data-slot":"textarea",className:h("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...r})}function S({onSubmitQuery:t,searchQuery:r}){const s=c.useRef(null),o=g,[u,l]=c.useState(null),i=a=>j(a)!==null,y=a=>{var d;a.preventDefault();let n=!0;if((d=s.current)!=null&&d.checkValidity()){const m=new FormData(s.current).get("query");i(m)?t(m):n=!1}else n=!1;l(n?null:"Invalid query. Please check the query and try again.")};return e.jsxs("form",{ref:s,onSubmit:y,className:"max-w-4xl mx-auto space-y-4 mb-4","data-testid":"custom-query-form",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"custom-query",children:"Query"}),e.jsx(Q,{className:"font-bold placeholder:font-normal",required:!0,placeholder:"Type your query here.",id:"custom-query",name:"query","data-testid":"custom-query-field",defaultValue:r||"",autoFocus:!0}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Supported Tables:Â ",o.map((a,n)=>e.jsxs("code",{children:[a,n<o.length-1?", ":""]},a))]}),u&&e.jsx("p",{className:"text-sm text-destructive-foreground","data-testid":"custom-query-error",children:u})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx(x,{variant:"secondary",className:"mr-2 cursor-pointer",type:"reset",children:"Reset"}),e.jsx(x,{type:"submit",className:"cursor-pointer",children:"Run Query"})]})]})}function N({searchQuery:t}){const r=f(),[s,o]=c.useState(t||null),u=q,l=i=>{r({search:{query:i}}),o(i)};return e.jsxs(e.Fragment,{children:[e.jsx(S,{searchQuery:t,onSubmitQuery:l}),e.jsx(v,{query:s,tablesConfig:u})]})}const R=function(){const r=p({from:"/"}),s=r==null?void 0:r.query;return e.jsx(e.Fragment,{children:e.jsx(N,{searchQuery:s})})};export{R as component};
